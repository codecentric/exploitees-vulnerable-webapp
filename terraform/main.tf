terraform {
  required_providers {
    name = {
      source  = "hashicorp/aws"
      version = "4.14.0"
    }
  }
}

provider "aws" {
  region = local.region
}

# variable "domain_name" {
#   type = string
# }

variable "vpc_cidr_block" {
  type    = string
  default = "10.201.0.0/16"
}

variable "webgoat_version" {
  type    = string
  default = "8.2.2"
}

locals {
  region               = "eu-central-1"
  codecentric_vpn_cidr = "87.191.39.154/32"
}


module "vpc" {
  source = "terraform-aws-modules/vpc/aws"

  name = "webgoat"
  cidr = var.vpc_cidr_block

  azs            = [for suffix in ["a", "b", "c"] : "${local.region}${suffix}"]
  public_subnets = cidrsubnets("10.201.0.0/16", 8, 8, 8)

  enable_nat_gateway = false
  enable_vpn_gateway = false

  vpc_tags = {
    Name = "webgoat"
  }
}

